<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>UP- | 日本人向けファスモ外部ツール</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #05070a;
      --bg-card: #11141b;
      --bg-chip: #1d222f;
      --accent: #5fd0ff;
      --accent-soft: #22455a;
      --text-main: #f5f7ff;
      --text-muted: #a3acc4;
      --danger: #ff6b81;
      --good: #7bffb3;
      --border-soft: #272b37;
      --radius-lg: 14px;
      --shadow-soft: 0 8px 20px rgba(0,0,0,0.5);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #10172a 0, #05070a 40%, #020308 100%);
      color: var(--text-main);
    }
    .app-shell {
      max-width: 1200px;
      margin: 0 auto;
      padding: 12px 10px 24px;
    }
    header {
      display: flex;
      flex-direction: column;
      gap: 4px;
      margin-bottom: 10px;
    }
    header h1 {
      font-size: 20px;
      margin: 0;
      letter-spacing: 0.04em;
    }
    header p {
      margin: 0;
      font-size: 12px;
      color: var(--text-muted);
    }
    .section-label {
      margin: 4px 2px 2px;
      font-size: 11px;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .section-label span.right {
      opacity: 0.7;
      font-size: 10px;
    }
    .pill-row {
      display: flex;
      flex-wrap: nowrap;
      gap: 8px;
      overflow-x: auto;
      padding: 6px 2px 4px;
      scrollbar-width: thin;
    }
    .pill {
      flex: 0 0 auto;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 4px 10px;
      font-size: 11px;
      color: var(--text-muted);
      background: rgba(10,12,18,0.8);
      display: inline-flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      user-select: none;
      transition: background 0.15s, border-color 0.15s, color 0.15s, transform 0.05s;
    }
    .pill.active-include {
      border-color: var(--good);
      background: rgba(10,40,30,0.9);
      color: var(--good);
      transform: translateY(1px);
    }
    .pill.active-exclude {
      border-color: var(--danger);
      background: rgba(50,10,20,0.9);
      color: var(--danger);
      transform: translateY(1px);
    }
    .ghost-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    @media (min-width: 720px) {
      .ghost-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }
    @media (min-width: 1024px) {
      .ghost-grid {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
    }
    .ghost-card {
      background: linear-gradient(145deg, rgba(18,23,35,0.96), rgba(7,10,18,0.97));
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow-soft);
      padding: 10px 10px 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
      position: relative;
      overflow: hidden;
    }
    .ghost-card.hidden {
      opacity: 0.18;
      filter: grayscale(0.8);
      pointer-events: none;
    }
    .ghost-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 4px;
    }
    .ghost-name {
      font-size: 15px;
      font-weight: 600;
      letter-spacing: 0.05em;
      text-transform: uppercase;
    }
    .ghost-meta {
      font-size: 11px;
      color: var(--text-muted);
      text-align: right;
    }
    .evidence-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: 2px;
    }
    .evidence-chip {
      font-size: 10px;
      padding: 3px 6px;
      border-radius: 999px;
      background: var(--bg-chip);
      border: 1px solid var(--accent-soft);
      color: var(--text-main);
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }
    .evidence-chip.forced {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(95,208,255,0.3);
    }
    .badge {
      font-size: 9px;
      padding: 1px 5px;
      border-radius: 999px;
      border: 1px solid var(--accent-soft);
      color: var(--accent);
    }
    .row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 4px;
      font-size: 11px;
      color: var(--text-muted);
    }
    .row strong {
      font-size: 11px;
      color: var(--text-main);
    }
    .tags-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      margin-top: 2px;
    }
    .tag-chip {
      font-size: 9px;
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(18,24,38,0.9);
      border: 1px solid rgba(100,110,150,0.7);
      color: var(--text-muted);
    }
    .tests {
      font-size: 10px;
      color: var(--text-muted);
      margin-top: 4px;
      padding-top: 4px;
      border-top: 1px dashed rgba(70,76,100,0.7);
    }
    .tests ul {
      margin: 2px 0 0;
      padding-left: 15px;
    }
    .tests li {
      margin: 0;
      line-height: 1.3;
    }
    .difficulty-toggle {
      display: inline-flex;
      border-radius: 999px;
      overflow: hidden;
      border: 1px solid var(--border-soft);
    }
    .difficulty-toggle button {
      border: none;
      padding: 3px 10px;
      font-size: 11px;
      background: transparent;
      color: var(--text-muted);
      cursor: pointer;
    }
    .difficulty-toggle button.active {
      background: rgba(40,70,110,0.9);
      color: var(--text-main);
    }
    footer {
      margin-top: 14px;
      font-size: 10px;
      color: var(--text-muted);
      text-align: center;
      opacity: 0.7;
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <header>
      <h1>UP- <span style="opacity:.6;font-size:11px;">日本人向け Phasmo 外部ツール</span></h1>
      <p>証拠 / 速度 / ハントSAN / 0証拠テストでゴースト候補を高速絞り込み。</p>
      <div class="section-label">
        <span>難易度</span>
        <div class="difficulty-toggle" id="difficultyToggle">
          <button data-diff="standard" class="active">標準</button>
          <button data-diff="nightmare">Nightmare</button>
          <button data-diff="insanity">Insanity</button>
        </div>
      </div>
    </header>

    <div class="section-label">
      <span>証拠フィルタ</span>
      <span class="right">タップで「必要 → 排除 → 解除」</span>
    </div>
    <div class="pill-row" id="evidenceRow"></div>

    <div class="section-label">
      <span>タグフィルタ</span>
      <span class="right">重ねがけで候補絞り込み</span>
    </div>
    <div class="pill-row" id="tagRow"></div>

    <div class="ghost-grid" id="ghostGrid"></div>

    <footer>
      主専用ビルド / ブラウザだけで動作（オフライン可）。<br/>
      フィルタ状態はリロードでリセットされます。
    </footer>
  </div>

  <script>
    const GHOSTS = [
      {
        id: "spirit",
        name: "Spirit",
        evidences: ["EMF Lv5", "スピボ", "ゴーストライティング"],
        forcedEvidences: [],
        huntSanity: { base: 50, note: "標準。スマッジ後180秒はハント不可。" },
        speeds: { base: "~1.7 m/s", detail: "速度・挙動ともに基準ゴースト。" },
        abilities: [
          "固有能力ほぼなし。挙動は“基準”として比較に使う。"
        ],
        tests: [
          "スマッジ後に180秒以上ハントが来ない → Spirit濃厚（他は90秒前後）。"
        ],
        tags: ["標準", "スマッジ延長"]
      },
      {
        id: "wraith",
        name: "Wraith",
        evidences: ["EMF Lv5", "スピボ", "DOTS"],
        forcedEvidences: [],
        huntSanity: { base: 50, note: "標準。" },
        speeds: { base: "~1.7 m/s", detail: "速度は標準。テレポート挙動あり。" },
        abilities: [
          "ランダムにプレイヤーへテレポートして干渉。",
          "塩を踏んでも足跡（UV）が出ない。"
        ],
        tests: [
          "塩を踏んだのにUVで足跡が出ない → Wraith確定。",
          "不自然に離れた場所でEMFや足音が出る → テレポート挙動を疑う。"
        ],
        tags: ["テレポート", "塩NG", "標準"]
      },
      {
        id: "phantom",
        name: "Phantom",
        evidences: ["スピボ", "DOTS", "指紋"],
        forcedEvidences: [],
        huntSanity: { base: 50, note: "イベントでSAN大きめに削る。" },
        speeds: { base: "~1.7 m/s", detail: "ハント中の点滅が遅く、姿が見えにくい。" },
        abilities: [
          "写真を撮るとモデルが一時的に消える。",
          "ゴーストイベント1回でSAN -10%。"
        ],
        tests: [
          "イベント中に写真を撮って姿だけ消える（干渉は残る）→ Phantom候補。",
          "ハント中の点滅間隔が長く、姿がほぼ見えない。"
        ],
        tags: ["写真消失", "SAN大ダメ", "視認性低"]
      },
      {
        id: "poltergeist",
        name: "Poltergeist",
        evidences: ["スピボ", "ゴーストライティング", "指紋"],
        forcedEvidences: [],
        huntSanity: { base: 50, note: "標準。" },
        speeds: { base: "~1.7 m/s", detail: "速度標準。投擲特化。" },
        abilities: [
          "一度に複数の物を投げる“マルチスロー”。",
          "物投げ時にSANを比較的大きく削る。"
        ],
        tests: [
          "物が一気に複数飛ぶ → Polter本命。",
          "アイテム部屋を作って投げ方を観察する。"
        ],
        tags: ["投擲多い", "SANダメ", "標準"]
      },
      {
        id: "banshee",
        name: "Banshee",
        evidences: ["DOTS", "指紋", "ゴーストオーブ"],
        forcedEvidences: [],
        huntSanity: { base: 50, note: "ターゲット1人基準で判定。" },
        speeds: { base: "~1.7 m/s", detail: "速度標準。ターゲット追尾型。" },
        abilities: [
          "ターゲットを1人決めて、そのプレイヤーを優先して狙う。",
          "パラボラで“悲鳴”の特殊音を出す。"
        ],
        tests: [
          "ターゲット以外の近くを素通りするハント → Banshee候補。",
          "パラボラで悲鳴SEが出たらBansheeほぼ確。"
        ],
        tags: ["単体ターゲット", "パラボラ悲鳴"]
      },
      {
        id: "jinn",
        name: "Jinn",
        evidences: ["EMF Lv5", "氷点下温度", "指紋"],
        forcedEvidences: [],
        huntSanity: { base: 50, note: "標準。ブレーカーON時のみ加速。" },
        speeds: { base: "2.5 m/s(遠距離)", detail: "ブレーカーONかつ遠距離で加速。接近すると減速。" },
        abilities: [
          "ブレーカーONで、遠距離かつ視認しているときに加速。",
          "基本的にブレーカーを落としにくい傾向。"
        ],
        tests: [
          "ブレーカーONで距離を取ると明らかに速い → Jinn候補。",
          "ブレーカーを落とすと速度が普通になるか確認。"
        ],
        tags: ["遠距離加速", "ブレーカー依存"]
      },
      {
        id: "mare",
        name: "Mare",
        evidences: ["スピボ", "ゴーストライティング", "ゴーストオーブ"],
        forcedEvidences: [],
        huntSanity: { base: 60, note: "暗所60% / 明所40%でハント開始。" },
        speeds: { base: "~1.7 m/s", detail: "速度標準。暗闇で凶暴。" },
        abilities: [
          "暗所で早ハント（平均SAN60%）。",
          "電気を消しがち。明るい部屋では活動控えめ。"
        ],
        tests: [
          "ライトONでローム・干渉が減る＆ハントが遅くなる → Mare寄り。",
          "わざと明かりを増やして様子を見る。"
        ],
        tags: ["暗闇強化", "早ハント", "ライト嫌い"]
      },
      {
        id: "revenant",
        name: "Revenant",
        evidences: ["ゴーストライティング", "氷点下温度", "ゴーストオーブ"],
        forcedEvidences: [],
        huntSanity: { base: 50, note: "標準。" },
        speeds: { base: "3.0 / 1.0 m/s", detail: "視認中は爆速、見失うと超鈍足。" },
        abilities: [
          "ターゲットを視認している間は非常に速い。",
          "視認していないときは極端に遅くなる。"
        ],
        tests: [
          "ハント中、直線で追われると異常に速いが、隠れると足音が極端に遅くなる → Rev濃厚。"
        ],
        tags: ["LOS爆速", "非LOS激遅"]
      },
      {
        id: "demon",
        name: "Demon",
        evidences: ["ゴーストライティング", "氷点下温度", "指紋"],
        forcedEvidences: [],
        huntSanity: { base: 70, note: "最速クラスの早ハント。" },
        speeds: { base: "~1.7 m/s", detail: "速度標準。頻繁にハントを仕掛ける。" },
        abilities: [
          "平均SAN70%付近からハント可能。",
          "スマッジから再ハントまでの待機が短い。クルシフィックスも燃えやすい。"
        ],
        tests: [
          "高SAN帯で何度もハント → Demon本命。",
          "クルシフィックスが広範囲で早く消費されるかを見る。"
        ],
        tags: ["超早ハント", "クルシ消費増"]
      },
      {
        id: "yurei",
        name: "Yurei",
        evidences: ["氷点下温度", "ゴーストオーブ", "DOTS"],
        forcedEvidences: [],
        huntSanity: { base: 50, note: "標準。ドア叩きでSANを多めに削る。" },
        speeds: { base: "~1.7 m/s", detail: "速度標準。ドアslamイベント特化。" },
        abilities: [
          "ドアを強く閉めるイベント時にSANを多く削る。",
          "スマッジで一時的に部屋に“閉じ込め”できる。"
        ],
        tests: [
          "ドアバンでSANが大きく落ちるならYurei候補。",
          "スマッジ後しばらくロームが減るか確認。"
        ],
        tags: ["ドアSAN削り", "ローム制限"]
      },
      {
        id: "oni",
        name: "Oni",
        evidences: ["EMF Lv5", "氷点下温度", "DOTS"],
        forcedEvidences: [],
        huntSanity: { base: 50, note: "標準。活動量が多いゴリラ枠。" },
        speeds: { base: "~1.8 m/s", detail: "やや速め。イベント頻度が高い。" },
        abilities: [
          "イベント頻度が高く、姿を見せることが多い。",
          "エアボール（白玉）ゴーストイベントをしない。"
        ],
        tests: [
          "やたら出てくる・物もよく動く・エアボールが一切ない → Oni濃厚。"
        ],
        tags: ["高活動", "エアボール無し"]
      },
      {
        id: "yokai",
        name: "Yokai",
        evidences: ["スピボ", "DOTS", "ゴーストオーブ"],
        forcedEvidences: [],
        huntSanity: { base: 80, note: "ボイチャに反応して早ハントしやすい。" },
        speeds: { base: "1.5〜1.7 m/s", detail: "速度標準。声に反応しやすい。" },
        abilities: [
          "近距離での会話・騒音で早めにハントを起こす。",
          "ハント中、遠くの声はほぼ聞こえない。"
        ],
        tests: [
          "高SAN帯でしゃべっている最中にだけハントが来る → Yokai候補。",
          "ハント中に遠距離ボイチャで釣れないか試す。"
        ],
        tags: ["声トリガー", "高SANハント"]
      },
      {
        id: "hantu",
        name: "Hantu",
        evidences: ["氷点下温度", "ゴーストオーブ", "指紋"],
        forcedEvidences: ["氷点下温度"],
        huntSanity: { base: 50, note: "標準。温度依存で速度変化。" },
        speeds: { base: "1.4〜2.7 m/s", detail: "寒いほど速い。ブレーカーOFFで強い。" },
        abilities: [
          "室温が低いエリアで大きく加速する。",
          "ブレーカーOFF時、ハント中に吐息が見えやすい。"
        ],
        tests: [
          "ブレーカーOFFでハントさせ、冷えた廊下などで露骨に加速 → Hantu濃厚。",
          "温度計で温度差を確認。"
        ],
        tags: ["温度依存速度", "強制証拠"]
      },
      {
        id: "goryo",
        name: "Goryo",
        evidences: ["EMF Lv5", "DOTS", "指紋"],
        forcedEvidences: ["DOTS"],
        huntSanity: { base: 50, note: "標準。" },
        speeds: { base: "~1.7 m/s", detail: "DOTS専用挙動あり。" },
        abilities: [
          "DOTSは基本的に“カメラ越し＋同室に人がいない”時のみ見える。",
          "ローム範囲が狭め。あまり部屋を変え
